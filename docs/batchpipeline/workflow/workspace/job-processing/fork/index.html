<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">fork</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="AccuInsight+ Documentation · 사용자 매뉴얼입니다."><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="### Definition"><meta data-react-helmet="true" property="og:description" content="### Definition"><meta data-react-helmet="true" property="og:url" content="https://accuinsight.github.io//docs/batchpipeline/workflow/workspace/job-processing/fork">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.40dbeab3.css">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.png" alt="AccuInsight+ Logo"><strong>소개</strong></a><a class="navbar__item navbar__link" href="/docs/solution/Pipeline/pipeline_sol">솔루션</a><a class="navbar__item navbar__link" href="/docs/docs">Docs</a><a class="navbar__item navbar__link" href="/user">요금정책</a><a class="navbar__item navbar__link" href="/docs/FAQ/FAQ">FAQ</a><a class="navbar__item navbar__link" activeclassname="navbar__link--active" items="[object Object],[object Object]">Menu Tree</a><a class="navbar__item navbar__link" items="[object Object],[object Object]" href="/docs/명환/명환">명환</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://accuinsight.cloudz.co.kr">AccuInsight+</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/accuinsight">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.png" alt="AccuInsight+ Logo"><strong>소개</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/solution/Pipeline/pipeline_sol">솔루션</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/docs">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/user">요금정책</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/FAQ/FAQ">FAQ</a></li><li class="menu__list-item"><a class="menu__link" activeclassname="navbar__link--active" items="[object Object],[object Object]">Menu Tree</a></li><li class="menu__list-item"><a class="menu__link" items="[object Object],[object Object]" href="/docs/명환/명환">명환</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://accuinsight.cloudz.co.kr">AccuInsight+</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/accuinsight">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">fork</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="definition"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#definition" title="Direct link to heading">#</a>Definition</h3><p>작업 flow를 분기시켜 노드들을 독립된 flow에서 수행한다.<br>
좌측 [Flow구성]노드 중 [fork]노드를 drag &amp; drop 한다. 동시에 수행할 작업을 적절히 선택한 후 워크플로우를 구성하는데, 이렇게 분기된 작업은 join으로 합쳐야 한다. </p><p>fork-join으로 구성되는 워크플로우의 특징은 다음과 같다. </p><ul><li>분기된 모든 노드가 종료해야 워크플로우가 succeed 됨(즉, 분기된 노드 중 종료된 작업이 있어도 전체 노드가 종료할 때까지 대기) </li><li>분기 노드 중 하나라도 실패할 경우 전체 워크플로우가 실패  </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="set"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#set" title="Direct link to heading">#</a>Set</h3><p>[setting], [scheduler], [parameter] 설정은 [워크플로우 생성] &gt; [설정]을 참고한다.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="property"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#property" title="Direct link to heading">#</a>property</h4><p>[Node Description] 작성 중인 노드명 입력</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="example"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a>Example</h3><p>서울특별시 대기오염 측정정보(출처 : 공공데이터 포털, 2019년 기준) 중 미세먼지(PM10)와 초미세먼지(PM2.5)에 해당하는 데이터를 별도 테이블로 생성한다. </p><p> <img src="/img/batchpipeline/workflow/workspace/job-processing/flow037_fork-join_workflow%EA%B5%AC%EC%84%B1.png" alt="flow037"></p><blockquote><p><strong>[Note] 서울특별시 대기오염 측정정보 데이터</strong><br>
서울특별시 보건환경연구원 대기오염측정망시스템에서 제공하는 대기오염 측정정보<br>
출처 : <a href="https://www.data.go.kr">https://www.data.go.kr</a> (공공 데이터 포털)</p></blockquote><ol><li><p>HDFS/Hive 브라우저를 통해 원시데이터 적재 및 테이블 생성</p><p><img src="/img/batchpipeline/workflow/workspace/job-processing/flow038_fork-join_%EC%9B%90%EC%8B%9C%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%A0%81%EC%9E%AC.png" alt="flow038"></p></li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE EXTERNAL TABLE  default.air_pollution(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        measurement_day STRING,   -- 측정일시 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        station_cd STRING,        -- 측정소 코드</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        metric_cd STRING,         -- 측정항목 코드</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        medium DOUBLE,            -- 평균값</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        status INT,               -- 측정기 상태</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        national INT,             -- 국가 기준초과 구분</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        local_gov INT )             -- 지자체 기준초과 구분</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                COMMENT &#x27;서울특별시 대기오염 측정정보(출처 : 공공데이터 포털)&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ROW FORMAT DELIMITED </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                FIELDS TERMINATED BY &#x27;,&#x27; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                LINES TERMINATED BY &#x27;\n&#x27; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                STORED AS TEXTFILE </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                LOCATION &#x27;/tmp/ManSample&#x27;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><ol start="2"><li><p>[executeHive]노드(노드명 : executeHive_sum)로 통계성 테이블 생성(전체 데이터량을 측정소별로 분리)</p><p><img src="/img/batchpipeline/workflow/workspace/job-processing/flow039_fork-join_%EA%B4%80%EC%B8%A1%EC%86%8C%EB%B3%84%EC%9A%94%EC%95%BD%ED%85%8C%EC%9D%B4%EB%B8%94%EC%83%9D%EC%84%B1.png" alt="flow039"></p></li><li><p>fork 노드 연결 및 [executeHive] 노드를 병렬로 연결하여 미세먼지(PM10), 초미세먼지(PM25) 데이터만 추출한 별도 테이블 생성</p></li></ol><ul><li><strong>[executeHive_pm10]</strong> create table air_pollution_pm10 as select * from air_pollution where air_pollution.metric_cd = &#x27;8&#x27; </li><li><strong>[executeHive_pm25]</strong> create table air_pollution_pm25 as select * from air_pollution where air_pollution.metric_cd = &#x27;9&#x27;</li></ul><blockquote><p>[Note] air_pollution 테이블의 측정항목 코드(metric_cd)는 아래와 같음  </p><table><thead><tr><th>코드</th><th>설명</th></tr></thead><tbody><tr><td>1</td><td>SO2   (아황산가스)</td></tr><tr><td>3</td><td>NO2   (이산화질소)</td></tr><tr><td>5</td><td>CO    (일산화탄소)</td></tr><tr><td>6</td><td>O3    (오존)</td></tr><tr><td>8</td><td>PM10  (미세먼지:Particulate Matter)</td></tr><tr><td>9</td><td>PM2.5 (초미세먼지)</td></tr></tbody></table></blockquote><ol start="4"><li>[fork]노드 사용할 경우 [join]노드를 사용해서 종료한다.  </li></ol><p>워크플로우 실행 후 새로운 테이블이 생성됐다. </p><p> <img src="/img/batchpipeline/workflow/workspace/job-processing/flow040_fork-join_%EC%8B%A4%ED%96%89%EA%B2%B0%EA%B3%BC.png" alt="flow040"></p><blockquote><p><strong>[Note] Control Node</strong><br>
[Flow구성] 노드 중 decision, fork, join Node를 Control Node라고 한다.<br>
작업을 수행하기 보다 워크플로우를 Control 하는 용도로 사용한다.</p></blockquote></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#definition" class="contents__link">Definition</a></li><li><a href="#set" class="contents__link">Set</a></li><li><a href="#example" class="contents__link">Example</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center">Copyright © 2020 BY SK HOLDINGS CO. LTD. ALL RIGHTS RESERVED</div></div></footer>
</div>

<script src="/styles.bf4f7ec4.js"></script>

<script src="/runtime~main.23e82336.js"></script>

<script src="/main.37c5464c.js"></script>

<script src="/1.61161189.js"></script>

<script src="/2.2bd6c863.js"></script>

<script src="/1be78505.213f8547.js"></script>

<script src="/20ac7829.f151a736.js"></script>

<script src="/17896441.1703577d.js"></script>

<script src="/1eb5a28c.bfda9b9a.js"></script>


</body>
</html>